const helpers = require("../../../../lib/xs/util/helpers");
const MockstarFacade = require("../../../testtools/mockstar_facade").MockstarFacade;
const frontendSettingsAdaption = $.import("xs.postinstall.release_4_0_0", "adapt_filter_mass_change_setting_content");

describe("adapt_filter_mass_change_setting_content-tests", () => {
    let oMockstar;

    beforeOnce(() => {
        oMockstar = new MockstarFacade({
            substituteTables: {
                frontend_settings: "sap.plc.db::basis.t_frontend_settings",
            },
        });
    });

    beforeEach(() => {
        oMockstar.clearAllTables();
    });
    /*
       Test data input decoded:
       MassChange
       {"FILTER_CONFIGURATION":{"CONDITIONS":[]},"CHANGE_CONFIGURATION":{"FIELD":{"BUSINESS_OBJECT":"Item","COLUMN_ID":"TARGET_COST_CURRENCY_ID","PATH":"ITEM"},"OPERATOR":"SetFixed","REPLACE_TEXT_VALUE":"","REPLACE_WITH_VALUE":"","VALUE":"{\"CURRENCY_ID\":\"BRL\",\"DECIMALS_DISPLAYED\":0,\"_VALID_FROM\":null,\"_VALID_TO\":null,\"_SOURCE\":null,\"_CREATED_BY_USER_ID\":null,\"_VALID_FROM_FIRST_VERSION\":null,\"_CREATED_BY_USER_ID_FIRST_VERSION\":null}"}}
       {"FILTER_CONFIGURATION":{"CONDITIONS":[{"OPERATOR":"Is","FIELD":{"BUSINESS_OBJECT":"Material_Type","COLUMN_ID":"MATERIAL_TYPE_ID","PATH":"ITEM.MATERIAL_TYPE"},"VALUE":"{\"MATERIAL_TYPE_ID\":\"#FIN\",\"_VALID_FROM\":null,\"_VALID_TO\":null,\"_SOURCE\":null,\"_CREATED_BY_USER_ID\":null,\"_VALID_FROM_FIRST_VERSION\":null,\"_CREATED_BY_USER_ID_FIRST_VERSION\":null}"}]},"CHANGE_CONFIGURATION":{"FIELD":{"BUSINESS_OBJECT":"Plant","COLUMN_ID":"PLANT_ID","PATH":"ITEM.PLANT"},"OPERATOR":"SetEmpty","REPLACE_TEXT_VALUE":"","REPLACE_WITH_VALUE":"","VALUE":null}}
       {"FILTER_CONFIGURATION":{"CONDITIONS":[{"OPERATOR":"Contains","FIELD":{"BUSINESS_OBJECT":"Account","COLUMN_ID":"ACCOUNT_ID","PATH":"ITEM.ACCOUNT"},"VALUE":"A"},{"OPERATOR":"IsNot","FIELD":{"BUSINESS_OBJECT":"Activity_Type","COLUMN_ID":"ACTIVITY_TYPE_ID","PATH":"ITEM.ACTIVITY_TYPE"},"VALUE":"{\"ACTIVITY_TYPE_ID\":\"#AT2\",\"CONTROLLING_AREA_ID\":\"#CA1\",\"ACCOUNT_ID\":null,\"_VALID_FROM\":null,\"_VALID_TO\":null,\"_SOURCE\":null,\"_CREATED_BY_USER_ID\":null,\"_VALID_FROM_FIRST_VERSION\":null,\"_CREATED_BY_USER_ID_FIRST_VERSION\":null}"}]},"CHANGE_CONFIGURATION":{"FIELD":{"BUSINESS_OBJECT":"Business_Area","COLUMN_ID":"BUSINESS_AREA_ID","PATH":"ITEM.BUSINESS_AREA"},"OPERATOR":"SetFixed","REPLACE_TEXT_VALUE":"","REPLACE_WITH_VALUE":"","VALUE":"{\"BUSINESS_AREA_ID\":\"#BA1\",\"_VALID_FROM\":null,\"_VALID_TO\":null,\"_SOURCE\":null,\"_CREATED_BY_USER_ID\":null,\"_VALID_FROM_FIRST_VERSION\":null,\"_CREATED_BY_USER_ID_FIRST_VERSION\":null}"}}
       {"FILTER_CONFIGURATION":{"CONDITIONS":[{"OPERATOR":"Is","FIELD":{"BUSINESS_OBJECT":"Item","COLUMN_ID":"IS_ACTIVE","PATH":"ITEM"},"VALUE":"True"}]},"CHANGE_CONFIGURATION":{"FIELD":{"BUSINESS_OBJECT":"Laboratory_Design_Office","COLUMN_ID":"LABORATORY_DESIGN_OFFICE_ID","PATH":"ITEM.LABORATORY_DESIGN_OFFICE"},"OPERATOR":"ReplaceSubstring","REPLACE_TEXT_VALUE":"tes","REPLACE_WITH_VALUE":"wes","VALUE":null}}
       {"FILTER_CONFIGURATION":{"CONDITIONS":[{"OPERATOR":"IsNot","FIELD":{"BUSINESS_OBJECT":"Material","COLUMN_ID":"MATERIAL_ID","PATH":"ITEM.MATERIAL"},"VALUE":"{\"MATERIAL_ID\":\"#100-120\",\"BASE_UOM_ID\":null,\"MATERIAL_GROUP_ID\":null,\"MATERIAL_TYPE_ID\":null,\"IS_CREATED_VIA_CAD_INTEGRATION\":null,\"IS_PHANTOM_MATERIAL\":null,\"IS_CONFIGURABLE_MATERIAL\":null,\"_VALID_FROM\":null,\"_VALID_TO\":null,\"_SOURCE\":null,\"_CREATED_BY_USER_ID\":null,\"_VALID_FROM_FIRST_VERSION\":null,\"_CREATED_BY_USER_ID_FIRST_VERSION\":null}"}]},"CHANGE_CONFIGURATION":{"FIELD":{"BUSINESS_OBJECT":"Laboratory_Design_Office","COLUMN_ID":"LABORATORY_DESIGN_OFFICE_ID","PATH":"ITEM.LABORATORY_DESIGN_OFFICE"},"OPERATOR":"SetFixed","REPLACE_TEXT_VALUE":"","REPLACE_WITH_VALUE":"","VALUE":"{\"LABORATORY_DESIGN_OFFICE_ID\":\"#L1\",\"_VALID_FROM\":null,\"_VALID_TO\":null,\"_SOURCE\":null,\"_CREATED_BY_USER_ID\":null,\"_VALID_FROM_FIRST_VERSION\":null,\"_CREATED_BY_USER_ID_FIRST_VERSION\":null}"}}
       {"FILTER_CONFIGURATION":{"CONDITIONS":[]},"CHANGE_CONFIGURATION":{"FIELD":{"BUSINESS_OBJECT":"Laboratory_Design_Office","COLUMN_ID":"LABORATORY_DESIGN_OFFICE_ID","PATH":"ITEM.LABORATORY_DESIGN_OFFICE"},"OPERATOR":"SetFixed","REPLACE_TEXT_VALUE":"","REPLACE_WITH_VALUE":"","VALUE":"{\"LABORATORY_DESIGN_OFFICE_ID\":\"#L1\",\"_VALID_FROM\":null,\"_VALID_TO\":null,\"_SOURCE\":null,\"_CREATED_BY_USER_ID\":null,\"_VALID_FROM_FIRST_VERSION\":null,\"_CREATED_BY_USER_ID_FIRST_VERSION\":null}"}}
       Filters
       {"CONDITIONS":[{"OPERATOR":"Is","FIELD":{"BUSINESS_OBJECT":"Material","COLUMN_ID":"MATERIAL_ID","PATH":"ITEM.MATERIAL"},"VALUE":"{\"MATERIAL_ID\":\"#100-100\",\"BASE_UOM_ID\":null,\"MATERIAL_GROUP_ID\":null,\"MATERIAL_TYPE_ID\":null,\"IS_CREATED_VIA_CAD_INTEGRATION\":null,\"IS_PHANTOM_MATERIAL\":null,\"IS_CONFIGURABLE_MATERIAL\":null,\"_VALID_FROM\":null,\"_VALID_TO\":null,\"_SOURCE\":null,\"_CREATED_BY_USER_ID\":null,\"_VALID_FROM_FIRST_VERSION\":null,\"_CREATED_BY_USER_ID_FIRST_VERSION\":null}"}]}
       {"CONDITIONS":[{"OPERATOR":"GreaterThan","FIELD":{"BUSINESS_OBJECT":"Item","COLUMN_ID":"PRICE","PATH":"ITEM"},"VALUE":"11"}]}
       {"CONDITIONS":[{"OPERATOR":"Is","FIELD":{"BUSINESS_OBJECT":"Account","COLUMN_ID":"ACCOUNT_ID","PATH":"ITEM.ACCOUNT"},"VALUE":"{\"ACCOUNT_ID\":\"#AC02\",\"CONTROLLING_AREA_ID\":\"#CA3\",\"_VALID_FROM\":null,\"_VALID_TO\":null,\"_SOURCE\":null,\"_CREATED_BY_USER_ID\":null,\"_VALID_FROM_FIRST_VERSION\":null,\"_CREATED_BY_USER_ID_FIRST_VERSION\":null}"}]}
       {"CONDITIONS":[{"OPERATOR":"Is","FIELD":{"BUSINESS_OBJECT":"Work_Center","COLUMN_ID":"WORK_CENTER_ID","PATH":"ITEM.WORK_CENTER"},"VALUE":"{\"WORK_CENTER_ID\":\"#WCEN111\",\"WORK_CENTER_CATEGORY\":null,\"PLANT_ID\":\"#PT1\",\"COST_CENTER_ID\":null,\"CONTROLLING_AREA_ID\":null,\"WORK_CENTER_RESPONSIBLE\":null,\"EFFICIENCY\":null,\"_VALID_FROM\":null,\"_VALID_TO\":null,\"_SOURCE\":null,\"_CREATED_BY_USER_ID\":null,\"_VALID_FROM_FIRST_VERSION\":null,\"_CREATED_BY_USER_ID_FIRST_VERSION\":null}"},{"OPERATOR":"Is","FIELD":{"BUSINESS_OBJECT":"Item","COLUMN_ID":"WORK_CENTER_CATEGORY","PATH":"ITEM"},"VALUE":"Machine"}]}
       {"CONDITIONS":[{"OPERATOR":"Is","FIELD":{"BUSINESS_OBJECT":"Item","COLUMN_ID":"CUST_DECIMAL_FORMULA","PATH":"ITEM"},"VALUE":"10"}]}
       {"CONDITIONS":[{"OPERATOR":"Is","FIELD":{"BUSINESS_OBJECT":"Laboratory_Design_Office","COLUMN_ID":"LABORATORY_DESIGN_OFFICE_ID","PATH":"ITEM.LABORATORY_DESIGN_OFFICE"},"VALUE":"{\"LABORATORY_DESIGN_OFFICE_ID\":\"#L1\",\"_VALID_FROM\":null,\"_VALID_TO\":null,\"_SOURCE\":null,\"_CREATED_BY_USER_ID\":null,\"_VALID_FROM_FIRST_VERSION\":null,\"_CREATED_BY_USER_ID_FIRST_VERSION\":null}"}]}
       {"CONDITIONS":[{"OPERATOR":"IsNot","FIELD":{"BUSINESS_OBJECT":"Material","COLUMN_ID":"MATERIAL_ID","PATH":"ITEM.MATERIAL"},"VALUE":"{\"MATERIAL_ID\":\"#100-100\",\"BASE_UOM_ID\":null,\"MATERIAL_GROUP_ID\":null,\"MATERIAL_TYPE_ID\":null,\"IS_CREATED_VIA_CAD_INTEGRATION\":null,\"IS_PHANTOM_MATERIAL\":null,\"IS_CONFIGURABLE_MATERIAL\":null,\"_VALID_FROM\":null,\"_VALID_TO\":null,\"_SOURCE\":null,\"_CREATED_BY_USER_ID\":null,\"_VALID_FROM_FIRST_VERSION\":null,\"_CREATED_BY_USER_ID_FIRST_VERSION\":null}"},{"OPERATOR":"IsNot","FIELD":{"BUSINESS_OBJECT":"Material","COLUMN_ID":"MATERIAL_DESCRIPTION","PATH":"ITEM.MATERIAL"},"VALUE":" abc"},{"OPERATOR":"IsNot","FIELD":{"BUSINESS_OBJECT":"Material","COLUMN_ID":"_SOURCE","PATH":"ITEM.MATERIAL"},"VALUE":"ERP"},{"OPERATOR":"IsNot","FIELD":{"BUSINESS_OBJECT":"Material_Type","COLUMN_ID":"MATERIAL_TYPE_ID","PATH":"ITEM.MATERIAL_TYPE"},"VALUE":"{\"MATERIAL_TYPE_ID\":\"#FIN\",\"_VALID_FROM\":null,\"_VALID_TO\":null,\"_SOURCE\":null,\"_CREATED_BY_USER_ID\":null,\"_VALID_FROM_FIRST_VERSION\":null,\"_CREATED_BY_USER_ID_FIRST_VERSION\":null}"}]}
       {"CONDITIONS":[{"OPERATOR":"Is","FIELD":{"BUSINESS_OBJECT":"Item","COLUMN_ID":"IS_RELEVANT_TO_COSTING_IN_ERP","PATH":"ITEM"},"VALUE":"True"}]}
       {"CONDITIONS":[{"OPERATOR":"Is","FIELD":{"BUSINESS_OBJECT":"Document","COLUMN_ID":"DOCUMENT_ID","PATH":"ITEM.DOCUMENT"},"VALUE":"{\"DOCUMENT_TYPE_ID\":\"#DR\",\"DOCUMENT_ID\":\"#DOC-100-100\",\"DOCUMENT_VERSION\":\"#1\",\"DOCUMENT_PART\":\"#01\",\"IS_CREATED_VIA_CAD_INTEGRATION\":null,\"DOCUMENT_STATUS_ID\":null,\"LABORATORY_DESIGN_OFFICE_ID\":null,\"_VALID_FROM\":null,\"_VALID_TO\":null,\"_SOURCE\":null,\"_CREATED_BY_USER_ID\":null,\"_VALID_FROM_FIRST_VERSION\":null,\"_CREATED_BY_USER_ID_FIRST_VERSION\":null}"}]}
       {"CONDITIONS":[{"OPERATOR":"IsNot","FIELD":{"BUSINESS_OBJECT":"Document","COLUMN_ID":"DOCUMENT_ID","PATH":"ITEM.DOCUMENT"},"VALUE":"{\"DOCUMENT_TYPE_ID\":\"#DR\",\"DOCUMENT_ID\":\"#DOC-100-100\",\"DOCUMENT_VERSION\":\"#1\",\"DOCUMENT_PART\":\"#01\",\"IS_CREATED_VIA_CAD_INTEGRATION\":null,\"DOCUMENT_STATUS_ID\":null,\"LABORATORY_DESIGN_OFFICE_ID\":null,\"_VALID_FROM\":null,\"_VALID_TO\":null,\"_SOURCE\":null,\"_CREATED_BY_USER_ID\":null,\"_VALID_FROM_FIRST_VERSION\":null,\"_CREATED_BY_USER_ID_FIRST_VERSION\":null}"}]}
       {"CONDITIONS":[{"OPERATOR":"Contains","FIELD":{"BUSINESS_OBJECT":"Business_Process","COLUMN_ID":"BUSINESS_PROCESS_ID","PATH":"ITEM.BUSINESS_PROCESS"},"VALUE":"P"}]}
     */
    it("should adapt correctly all the columns that were affected by data model change when they appear in field SETTING_CONTENT in t_frontend_settings", () => {
        // arrange
        // data before
        const sTotalCostCurrencyMassChange = "eyJGSUxURVJfQ09ORklHVVJBVElPTiI6eyJDT05ESVRJT05TIjpbXX0sIkNIQU5HRV9DT05GSUdVUkFUSU9OIjp7IkZJRUxEIjp7IkJVU0lORVNTX09CSkVDVCI6Ikl0ZW0iLCJDT0xVTU5fSUQiOiJUQVJHRVRfQ09TVF9DVVJSRU5DWV9JRCIsIlBBVEgiOiJJVEVNIn0sIk9QRVJBVE9SIjoiU2V0Rml4ZWQiLCJSRVBMQUNFX1RFWFRfVkFMVUUiOiIiLCJSRVBMQUNFX1dJVEhfVkFMVUUiOiIiLCJWQUxVRSI6IntcIkNVUlJFTkNZX0lEXCI6XCJCUkxcIixcIkRFQ0lNQUxTX0RJU1BMQVlFRFwiOjAsXCJfVkFMSURfRlJPTVwiOm51bGwsXCJfVkFMSURfVE9cIjpudWxsLFwiX1NPVVJDRVwiOm51bGwsXCJfQ1JFQVRFRF9CWV9VU0VSX0lEXCI6bnVsbCxcIl9WQUxJRF9GUk9NX0ZJUlNUX1ZFUlNJT05cIjpudWxsLFwiX0NSRUFURURfQllfVVNFUl9JRF9GSVJTVF9WRVJTSU9OXCI6bnVsbH0ifX0";
        const sClearPlantMaterialTypeMassChange = "eyJGSUxURVJfQ09ORklHVVJBVElPTiI6eyJDT05ESVRJT05TIjpbeyJPUEVSQVRPUiI6IklzIiwiRklFTEQiOnsiQlVTSU5FU1NfT0JKRUNUIjoiTWF0ZXJpYWxfVHlwZSIsIkNPTFVNTl9JRCI6Ik1BVEVSSUFMX1RZUEVfSUQiLCJQQVRIIjoiSVRFTS5NQVRFUklBTF9UWVBFIn0sIlZBTFVFIjoie1wiTUFURVJJQUxfVFlQRV9JRFwiOlwiI0ZJTlwiLFwiX1ZBTElEX0ZST01cIjpudWxsLFwiX1ZBTElEX1RPXCI6bnVsbCxcIl9TT1VSQ0VcIjpudWxsLFwiX0NSRUFURURfQllfVVNFUl9JRFwiOm51bGwsXCJfVkFMSURfRlJPTV9GSVJTVF9WRVJTSU9OXCI6bnVsbCxcIl9DUkVBVEVEX0JZX1VTRVJfSURfRklSU1RfVkVSU0lPTlwiOm51bGx9In1dfSwiQ0hBTkdFX0NPTkZJR1VSQVRJT04iOnsiRklFTEQiOnsiQlVTSU5FU1NfT0JKRUNUIjoiUGxhbnQiLCJDT0xVTU5fSUQiOiJQTEFOVF9JRCIsIlBBVEgiOiJJVEVNLlBMQU5UIn0sIk9QRVJBVE9SIjoiU2V0RW1wdHkiLCJSRVBMQUNFX1RFWFRfVkFMVUUiOiIiLCJSRVBMQUNFX1dJVEhfVkFMVUUiOiIiLCJWQUxVRSI6bnVsbH19";
        const sFilterAccountSetBusinessAreaMassChange = "eyJGSUxURVJfQ09ORklHVVJBVElPTiI6eyJDT05ESVRJT05TIjpbeyJPUEVSQVRPUiI6IkNvbnRhaW5zIiwiRklFTEQiOnsiQlVTSU5FU1NfT0JKRUNUIjoiQWNjb3VudCIsIkNPTFVNTl9JRCI6IkFDQ09VTlRfSUQiLCJQQVRIIjoiSVRFTS5BQ0NPVU5UIn0sIlZBTFVFIjoiQSJ9LHsiT1BFUkFUT1IiOiJJc05vdCIsIkZJRUxEIjp7IkJVU0lORVNTX09CSkVDVCI6IkFjdGl2aXR5X1R5cGUiLCJDT0xVTU5fSUQiOiJBQ1RJVklUWV9UWVBFX0lEIiwiUEFUSCI6IklURU0uQUNUSVZJVFlfVFlQRSJ9LCJWQUxVRSI6IntcIkFDVElWSVRZX1RZUEVfSURcIjpcIiNBVDJcIixcIkNPTlRST0xMSU5HX0FSRUFfSURcIjpcIiNDQTFcIixcIkFDQ09VTlRfSURcIjpudWxsLFwiX1ZBTElEX0ZST01cIjpudWxsLFwiX1ZBTElEX1RPXCI6bnVsbCxcIl9TT1VSQ0VcIjpudWxsLFwiX0NSRUFURURfQllfVVNFUl9JRFwiOm51bGwsXCJfVkFMSURfRlJPTV9GSVJTVF9WRVJTSU9OXCI6bnVsbCxcIl9DUkVBVEVEX0JZX1VTRVJfSURfRklSU1RfVkVSU0lPTlwiOm51bGx9In1dfSwiQ0hBTkdFX0NPTkZJR1VSQVRJT04iOnsiRklFTEQiOnsiQlVTSU5FU1NfT0JKRUNUIjoiQnVzaW5lc3NfQXJlYSIsIkNPTFVNTl9JRCI6IkJVU0lORVNTX0FSRUFfSUQiLCJQQVRIIjoiSVRFTS5CVVNJTkVTU19BUkVBIn0sIk9QRVJBVE9SIjoiU2V0Rml4ZWQiLCJSRVBMQUNFX1RFWFRfVkFMVUUiOiIiLCJSRVBMQUNFX1dJVEhfVkFMVUUiOiIiLCJWQUxVRSI6IntcIkJVU0lORVNTX0FSRUFfSURcIjpcIiNCQTFcIixcIl9WQUxJRF9GUk9NXCI6bnVsbCxcIl9WQUxJRF9UT1wiOm51bGwsXCJfU09VUkNFXCI6bnVsbCxcIl9DUkVBVEVEX0JZX1VTRVJfSURcIjpudWxsLFwiX1ZBTElEX0ZST01fRklSU1RfVkVSU0lPTlwiOm51bGwsXCJfQ1JFQVRFRF9CWV9VU0VSX0lEX0ZJUlNUX1ZFUlNJT05cIjpudWxsfSJ9fQ==";
        const sChangeActiveItemsDescriptionMassChange = "eyJGSUxURVJfQ09ORklHVVJBVElPTiI6eyJDT05ESVRJT05TIjpbeyJPUEVSQVRPUiI6IklzIiwiRklFTEQiOnsiQlVTSU5FU1NfT0JKRUNUIjoiSXRlbSIsIkNPTFVNTl9JRCI6IklTX0FDVElWRSIsIlBBVEgiOiJJVEVNIn0sIlZBTFVFIjoiVHJ1ZSJ9XX0sIkNIQU5HRV9DT05GSUdVUkFUSU9OIjp7IkZJRUxEIjp7IkJVU0lORVNTX09CSkVDVCI6IkxhYm9yYXRvcnlfRGVzaWduX09mZmljZSIsIkNPTFVNTl9JRCI6IkxBQk9SQVRPUllfREVTSUdOX09GRklDRV9JRCIsIlBBVEgiOiJJVEVNLkxBQk9SQVRPUllfREVTSUdOX09GRklDRSJ9LCJPUEVSQVRPUiI6IlJlcGxhY2VTdWJzdHJpbmciLCJSRVBMQUNFX1RFWFRfVkFMVUUiOiJ0ZXMiLCJSRVBMQUNFX1dJVEhfVkFMVUUiOiJ3ZXMiLCJWQUxVRSI6bnVsbH19";
        const sDesignOfficeFilterMassChange = "eyJGSUxURVJfQ09ORklHVVJBVElPTiI6eyJDT05ESVRJT05TIjpbeyJPUEVSQVRPUiI6IklzTm90IiwiRklFTEQiOnsiQlVTSU5FU1NfT0JKRUNUIjoiTWF0ZXJpYWwiLCJDT0xVTU5fSUQiOiJNQVRFUklBTF9JRCIsIlBBVEgiOiJJVEVNLk1BVEVSSUFMIn0sIlZBTFVFIjoie1wiTUFURVJJQUxfSURcIjpcIiMxMDAtMTIwXCIsXCJCQVNFX1VPTV9JRFwiOm51bGwsXCJNQVRFUklBTF9HUk9VUF9JRFwiOm51bGwsXCJNQVRFUklBTF9UWVBFX0lEXCI6bnVsbCxcIklTX0NSRUFURURfVklBX0NBRF9JTlRFR1JBVElPTlwiOm51bGwsXCJJU19QSEFOVE9NX01BVEVSSUFMXCI6bnVsbCxcIklTX0NPTkZJR1VSQUJMRV9NQVRFUklBTFwiOm51bGwsXCJfVkFMSURfRlJPTVwiOm51bGwsXCJfVkFMSURfVE9cIjpudWxsLFwiX1NPVVJDRVwiOm51bGwsXCJfQ1JFQVRFRF9CWV9VU0VSX0lEXCI6bnVsbCxcIl9WQUxJRF9GUk9NX0ZJUlNUX1ZFUlNJT05cIjpudWxsLFwiX0NSRUFURURfQllfVVNFUl9JRF9GSVJTVF9WRVJTSU9OXCI6bnVsbH0ifV19LCJDSEFOR0VfQ09ORklHVVJBVElPTiI6eyJGSUVMRCI6eyJCVVNJTkVTU19PQkpFQ1QiOiJMYWJvcmF0b3J5X0Rlc2lnbl9PZmZpY2UiLCJDT0xVTU5fSUQiOiJMQUJPUkFUT1JZX0RFU0lHTl9PRkZJQ0VfSUQiLCJQQVRIIjoiSVRFTS5MQUJPUkFUT1JZX0RFU0lHTl9PRkZJQ0UifSwiT1BFUkFUT1IiOiJTZXRGaXhlZCIsIlJFUExBQ0VfVEVYVF9WQUxVRSI6IiIsIlJFUExBQ0VfV0lUSF9WQUxVRSI6IiIsIlZBTFVFIjoie1wiTEFCT1JBVE9SWV9ERVNJR05fT0ZGSUNFX0lEXCI6XCIjTDFcIixcIl9WQUxJRF9GUk9NXCI6bnVsbCxcIl9WQUxJRF9UT1wiOm51bGwsXCJfU09VUkNFXCI6bnVsbCxcIl9DUkVBVEVEX0JZX1VTRVJfSURcIjpudWxsLFwiX1ZBTElEX0ZST01fRklSU1RfVkVSU0lPTlwiOm51bGwsXCJfQ1JFQVRFRF9CWV9VU0VSX0lEX0ZJUlNUX1ZFUlNJT05cIjpudWxsfSJ9fQ==";
        const sDesignOfficeMassChange = "eyJGSUxURVJfQ09ORklHVVJBVElPTiI6eyJDT05ESVRJT05TIjpbXX0sIkNIQU5HRV9DT05GSUdVUkFUSU9OIjp7IkZJRUxEIjp7IkJVU0lORVNTX09CSkVDVCI6IkxhYm9yYXRvcnlfRGVzaWduX09mZmljZSIsIkNPTFVNTl9JRCI6IkxBQk9SQVRPUllfREVTSUdOX09GRklDRV9JRCIsIlBBVEgiOiJJVEVNLkxBQk9SQVRPUllfREVTSUdOX09GRklDRSJ9LCJPUEVSQVRPUiI6IlNldEZpeGVkIiwiUkVQTEFDRV9URVhUX1ZBTFVFIjoiIiwiUkVQTEFDRV9XSVRIX1ZBTFVFIjoiIiwiVkFMVUUiOiJ7XCJMQUJPUkFUT1JZX0RFU0lHTl9PRkZJQ0VfSURcIjpcIiNMMVwiLFwiX1ZBTElEX0ZST01cIjpudWxsLFwiX1ZBTElEX1RPXCI6bnVsbCxcIl9TT1VSQ0VcIjpudWxsLFwiX0NSRUFURURfQllfVVNFUl9JRFwiOm51bGwsXCJfVkFMSURfRlJPTV9GSVJTVF9WRVJTSU9OXCI6bnVsbCxcIl9DUkVBVEVEX0JZX1VTRVJfSURfRklSU1RfVkVSU0lPTlwiOm51bGx9In19";

        const sMaterialFilter = "eyJDT05ESVRJT05TIjpbeyJPUEVSQVRPUiI6IklzIiwiRklFTEQiOnsiQlVTSU5FU1NfT0JKRUNUIjoiTWF0ZXJpYWwiLCJDT0xVTU5fSUQiOiJNQVRFUklBTF9JRCIsIlBBVEgiOiJJVEVNLk1BVEVSSUFMIn0sIlZBTFVFIjoie1wiTUFURVJJQUxfSURcIjpcIiMxMDAtMTAwXCIsXCJCQVNFX1VPTV9JRFwiOm51bGwsXCJNQVRFUklBTF9HUk9VUF9JRFwiOm51bGwsXCJNQVRFUklBTF9UWVBFX0lEXCI6bnVsbCxcIklTX0NSRUFURURfVklBX0NBRF9JTlRFR1JBVElPTlwiOm51bGwsXCJJU19QSEFOVE9NX01BVEVSSUFMXCI6bnVsbCxcIklTX0NPTkZJR1VSQUJMRV9NQVRFUklBTFwiOm51bGwsXCJfVkFMSURfRlJPTVwiOm51bGwsXCJfVkFMSURfVE9cIjpudWxsLFwiX1NPVVJDRVwiOm51bGwsXCJfQ1JFQVRFRF9CWV9VU0VSX0lEXCI6bnVsbCxcIl9WQUxJRF9GUk9NX0ZJUlNUX1ZFUlNJT05cIjpudWxsLFwiX0NSRUFURURfQllfVVNFUl9JRF9GSVJTVF9WRVJTSU9OXCI6bnVsbH0ifV19";
        const sPriceFilter = "eyJDT05ESVRJT05TIjpbeyJPUEVSQVRPUiI6IkdyZWF0ZXJUaGFuIiwiRklFTEQiOnsiQlVTSU5FU1NfT0JKRUNUIjoiSXRlbSIsIkNPTFVNTl9JRCI6IlBSSUNFIiwiUEFUSCI6IklURU0ifSwiVkFMVUUiOiIxMSJ9XX0=";
        const sAccountFilter = "eyJDT05ESVRJT05TIjpbeyJPUEVSQVRPUiI6IklzIiwiRklFTEQiOnsiQlVTSU5FU1NfT0JKRUNUIjoiQWNjb3VudCIsIkNPTFVNTl9JRCI6IkFDQ09VTlRfSUQiLCJQQVRIIjoiSVRFTS5BQ0NPVU5UIn0sIlZBTFVFIjoie1wiQUNDT1VOVF9JRFwiOlwiI0FDMDJcIixcIkNPTlRST0xMSU5HX0FSRUFfSURcIjpcIiNDQTNcIixcIl9WQUxJRF9GUk9NXCI6bnVsbCxcIl9WQUxJRF9UT1wiOm51bGwsXCJfU09VUkNFXCI6bnVsbCxcIl9DUkVBVEVEX0JZX1VTRVJfSURcIjpudWxsLFwiX1ZBTElEX0ZST01fRklSU1RfVkVSU0lPTlwiOm51bGwsXCJfQ1JFQVRFRF9CWV9VU0VSX0lEX0ZJUlNUX1ZFUlNJT05cIjpudWxsfSJ9XX0=";
        const sWorkCenterFilter = "eyJDT05ESVRJT05TIjpbeyJPUEVSQVRPUiI6IklzIiwiRklFTEQiOnsiQlVTSU5FU1NfT0JKRUNUIjoiV29ya19DZW50ZXIiLCJDT0xVTU5fSUQiOiJXT1JLX0NFTlRFUl9JRCIsIlBBVEgiOiJJVEVNLldPUktfQ0VOVEVSIn0sIlZBTFVFIjoie1wiV09SS19DRU5URVJfSURcIjpcIiNXQ0VOMTExXCIsXCJXT1JLX0NFTlRFUl9DQVRFR09SWVwiOm51bGwsXCJQTEFOVF9JRFwiOlwiI1BUMVwiLFwiQ09TVF9DRU5URVJfSURcIjpudWxsLFwiQ09OVFJPTExJTkdfQVJFQV9JRFwiOm51bGwsXCJXT1JLX0NFTlRFUl9SRVNQT05TSUJMRVwiOm51bGwsXCJFRkZJQ0lFTkNZXCI6bnVsbCxcIl9WQUxJRF9GUk9NXCI6bnVsbCxcIl9WQUxJRF9UT1wiOm51bGwsXCJfU09VUkNFXCI6bnVsbCxcIl9DUkVBVEVEX0JZX1VTRVJfSURcIjpudWxsLFwiX1ZBTElEX0ZST01fRklSU1RfVkVSU0lPTlwiOm51bGwsXCJfQ1JFQVRFRF9CWV9VU0VSX0lEX0ZJUlNUX1ZFUlNJT05cIjpudWxsfSJ9LHsiT1BFUkFUT1IiOiJJcyIsIkZJRUxEIjp7IkJVU0lORVNTX09CSkVDVCI6Ikl0ZW0iLCJDT0xVTU5fSUQiOiJXT1JLX0NFTlRFUl9DQVRFR09SWSIsIlBBVEgiOiJJVEVNIn0sIlZBTFVFIjoiTWFjaGluZSJ9XX0=";
        const sCustDecimalFilter = "eyJDT05ESVRJT05TIjpbeyJPUEVSQVRPUiI6IklzIiwiRklFTEQiOnsiQlVTSU5FU1NfT0JKRUNUIjoiSXRlbSIsIkNPTFVNTl9JRCI6IkNVU1RfREVDSU1BTF9GT1JNVUxBIiwiUEFUSCI6IklURU0ifSwiVkFMVUUiOiIxMCJ9XX0=";
        const sDesignOfficeFilter = "eyJDT05ESVRJT05TIjpbeyJPUEVSQVRPUiI6IklzIiwiRklFTEQiOnsiQlVTSU5FU1NfT0JKRUNUIjoiTGFib3JhdG9yeV9EZXNpZ25fT2ZmaWNlIiwiQ09MVU1OX0lEIjoiTEFCT1JBVE9SWV9ERVNJR05fT0ZGSUNFX0lEIiwiUEFUSCI6IklURU0uTEFCT1JBVE9SWV9ERVNJR05fT0ZGSUNFIn0sIlZBTFVFIjoie1wiTEFCT1JBVE9SWV9ERVNJR05fT0ZGSUNFX0lEXCI6XCIjTDFcIixcIl9WQUxJRF9GUk9NXCI6bnVsbCxcIl9WQUxJRF9UT1wiOm51bGwsXCJfU09VUkNFXCI6bnVsbCxcIl9DUkVBVEVEX0JZX1VTRVJfSURcIjpudWxsLFwiX1ZBTElEX0ZST01fRklSU1RfVkVSU0lPTlwiOm51bGwsXCJfQ1JFQVRFRF9CWV9VU0VSX0lEX0ZJUlNUX1ZFUlNJT05cIjpudWxsfSJ9XX0=";
        const sAllMaterialsFilter = "eyJDT05ESVRJT05TIjpbeyJPUEVSQVRPUiI6IklzTm90IiwiRklFTEQiOnsiQlVTSU5FU1NfT0JKRUNUIjoiTWF0ZXJpYWwiLCJDT0xVTU5fSUQiOiJNQVRFUklBTF9JRCIsIlBBVEgiOiJJVEVNLk1BVEVSSUFMIn0sIlZBTFVFIjoie1wiTUFURVJJQUxfSURcIjpcIiMxMDAtMTAwXCIsXCJCQVNFX1VPTV9JRFwiOm51bGwsXCJNQVRFUklBTF9HUk9VUF9JRFwiOm51bGwsXCJNQVRFUklBTF9UWVBFX0lEXCI6bnVsbCxcIklTX0NSRUFURURfVklBX0NBRF9JTlRFR1JBVElPTlwiOm51bGwsXCJJU19QSEFOVE9NX01BVEVSSUFMXCI6bnVsbCxcIklTX0NPTkZJR1VSQUJMRV9NQVRFUklBTFwiOm51bGwsXCJfVkFMSURfRlJPTVwiOm51bGwsXCJfVkFMSURfVE9cIjpudWxsLFwiX1NPVVJDRVwiOm51bGwsXCJfQ1JFQVRFRF9CWV9VU0VSX0lEXCI6bnVsbCxcIl9WQUxJRF9GUk9NX0ZJUlNUX1ZFUlNJT05cIjpudWxsLFwiX0NSRUFURURfQllfVVNFUl9JRF9GSVJTVF9WRVJTSU9OXCI6bnVsbH0ifSx7Ik9QRVJBVE9SIjoiSXNOb3QiLCJGSUVMRCI6eyJCVVNJTkVTU19PQkpFQ1QiOiJNYXRlcmlhbCIsIkNPTFVNTl9JRCI6Ik1BVEVSSUFMX0RFU0NSSVBUSU9OIiwiUEFUSCI6IklURU0uTUFURVJJQUwifSwiVkFMVUUiOiIgYWJjIn0seyJPUEVSQVRPUiI6IklzTm90IiwiRklFTEQiOnsiQlVTSU5FU1NfT0JKRUNUIjoiTWF0ZXJpYWwiLCJDT0xVTU5fSUQiOiJfU09VUkNFIiwiUEFUSCI6IklURU0uTUFURVJJQUwifSwiVkFMVUUiOiJFUlAifSx7Ik9QRVJBVE9SIjoiSXNOb3QiLCJGSUVMRCI6eyJCVVNJTkVTU19PQkpFQ1QiOiJNYXRlcmlhbF9UeXBlIiwiQ09MVU1OX0lEIjoiTUFURVJJQUxfVFlQRV9JRCIsIlBBVEgiOiJJVEVNLk1BVEVSSUFMX1RZUEUifSwiVkFMVUUiOiJ7XCJNQVRFUklBTF9UWVBFX0lEXCI6XCIjRklOXCIsXCJfVkFMSURfRlJPTVwiOm51bGwsXCJfVkFMSURfVE9cIjpudWxsLFwiX1NPVVJDRVwiOm51bGwsXCJfQ1JFQVRFRF9CWV9VU0VSX0lEXCI6bnVsbCxcIl9WQUxJRF9GUk9NX0ZJUlNUX1ZFUlNJT05cIjpudWxsLFwiX0NSRUFURURfQllfVVNFUl9JRF9GSVJTVF9WRVJTSU9OXCI6bnVsbH0ifV19";
        const sCostRelevantInERPFilter = "eyJDT05ESVRJT05TIjpbeyJPUEVSQVRPUiI6IklzIiwiRklFTEQiOnsiQlVTSU5FU1NfT0JKRUNUIjoiSXRlbSIsIkNPTFVNTl9JRCI6IklTX1JFTEVWQU5UX1RPX0NPU1RJTkdfSU5fRVJQIiwiUEFUSCI6IklURU0ifSwiVkFMVUUiOiJUcnVlIn1dfQ==";
        const sDocumentFilter = "eyJDT05ESVRJT05TIjpbeyJPUEVSQVRPUiI6IklzIiwiRklFTEQiOnsiQlVTSU5FU1NfT0JKRUNUIjoiRG9jdW1lbnQiLCJDT0xVTU5fSUQiOiJET0NVTUVOVF9JRCIsIlBBVEgiOiJJVEVNLkRPQ1VNRU5UIn0sIlZBTFVFIjoie1wiRE9DVU1FTlRfVFlQRV9JRFwiOlwiI0RSXCIsXCJET0NVTUVOVF9JRFwiOlwiI0RPQy0xMDAtMTAwXCIsXCJET0NVTUVOVF9WRVJTSU9OXCI6XCIjMVwiLFwiRE9DVU1FTlRfUEFSVFwiOlwiIzAxXCIsXCJJU19DUkVBVEVEX1ZJQV9DQURfSU5URUdSQVRJT05cIjpudWxsLFwiRE9DVU1FTlRfU1RBVFVTX0lEXCI6bnVsbCxcIkxBQk9SQVRPUllfREVTSUdOX09GRklDRV9JRFwiOm51bGwsXCJfVkFMSURfRlJPTVwiOm51bGwsXCJfVkFMSURfVE9cIjpudWxsLFwiX1NPVVJDRVwiOm51bGwsXCJfQ1JFQVRFRF9CWV9VU0VSX0lEXCI6bnVsbCxcIl9WQUxJRF9GUk9NX0ZJUlNUX1ZFUlNJT05cIjpudWxsLFwiX0NSRUFURURfQllfVVNFUl9JRF9GSVJTVF9WRVJTSU9OXCI6bnVsbH0ifV19";
        const sDocumentIsNotFilter = "eyJDT05ESVRJT05TIjpbeyJPUEVSQVRPUiI6IklzTm90IiwiRklFTEQiOnsiQlVTSU5FU1NfT0JKRUNUIjoiRG9jdW1lbnQiLCJDT0xVTU5fSUQiOiJET0NVTUVOVF9JRCIsIlBBVEgiOiJJVEVNLkRPQ1VNRU5UIn0sIlZBTFVFIjoie1wiRE9DVU1FTlRfVFlQRV9JRFwiOlwiI0RSXCIsXCJET0NVTUVOVF9JRFwiOlwiI0RPQy0xMDAtMTAwXCIsXCJET0NVTUVOVF9WRVJTSU9OXCI6XCIjMVwiLFwiRE9DVU1FTlRfUEFSVFwiOlwiIzAxXCIsXCJJU19DUkVBVEVEX1ZJQV9DQURfSU5URUdSQVRJT05cIjpudWxsLFwiRE9DVU1FTlRfU1RBVFVTX0lEXCI6bnVsbCxcIkxBQk9SQVRPUllfREVTSUdOX09GRklDRV9JRFwiOm51bGwsXCJfVkFMSURfRlJPTVwiOm51bGwsXCJfVkFMSURfVE9cIjpudWxsLFwiX1NPVVJDRVwiOm51bGwsXCJfQ1JFQVRFRF9CWV9VU0VSX0lEXCI6bnVsbCxcIl9WQUxJRF9GUk9NX0ZJUlNUX1ZFUlNJT05cIjpudWxsLFwiX0NSRUFURURfQllfVVNFUl9JRF9GSVJTVF9WRVJTSU9OXCI6bnVsbH0ifV19";
        const sProcessFilter = "eyJDT05ESVRJT05TIjpbeyJPUEVSQVRPUiI6IkNvbnRhaW5zIiwiRklFTEQiOnsiQlVTSU5FU1NfT0JKRUNUIjoiQnVzaW5lc3NfUHJvY2VzcyIsIkNPTFVNTl9JRCI6IkJVU0lORVNTX1BST0NFU1NfSUQiLCJQQVRIIjoiSVRFTS5CVVNJTkVTU19QUk9DRVNTIn0sIlZBTFVFIjoiUCJ9XX0=";
        // data after
        const aExpectedFrontendSettings = [
            "{\"FILTER_CONFIGURATION\":{\"CONDITIONS\":[]},\"CHANGE_CONFIGURATION\":{\"FIELD\":{\"BUSINESS_OBJECT\":\"Item\",\"COLUMN_ID\":\"TARGET_COST_CURRENCY_ID\",\"PATH\":\"ITEM\"},\"OPERATOR\":\"SetFixed\",\"REPLACE_TEXT_VALUE\":\"\",\"REPLACE_WITH_VALUE\":\"\",\"VALUE\":\"{\\\"CURRENCY_ID\\\":\\\"BRL\\\",\\\"_VALID_FROM\\\":null,\\\"_VALID_TO\\\":null,\\\"_SOURCE\\\":null,\\\"_VALID_FROM_FIRST_VERSION\\\":null,\\\"_CREATED_BY\\\":null,\\\"_CREATED_BY_FIRST_VERSION\\\":null}\"}}",
            "{\"FILTER_CONFIGURATION\":{\"CONDITIONS\":[{\"OPERATOR\":\"Is\",\"FIELD\":{\"BUSINESS_OBJECT\":\"Material_Type\",\"COLUMN_ID\":\"MATERIAL_TYPE_ID\",\"PATH\":\"ITEM.MATERIAL_TYPE\"},\"VALUE\":\"{\\\"MATERIAL_TYPE_ID\\\":\\\"#FIN\\\",\\\"_VALID_FROM\\\":null,\\\"_VALID_TO\\\":null,\\\"_SOURCE\\\":null,\\\"_VALID_FROM_FIRST_VERSION\\\":null,\\\"_CREATED_BY\\\":null,\\\"_CREATED_BY_FIRST_VERSION\\\":null}\"}]},\"CHANGE_CONFIGURATION\":{\"FIELD\":{\"BUSINESS_OBJECT\":\"Plant\",\"COLUMN_ID\":\"PLANT_ID\",\"PATH\":\"ITEM.PLANT\"},\"OPERATOR\":\"SetEmpty\",\"REPLACE_TEXT_VALUE\":\"\",\"REPLACE_WITH_VALUE\":\"\",\"VALUE\":null}}",
            "{\"FILTER_CONFIGURATION\":{\"CONDITIONS\":[{\"OPERATOR\":\"Contains\",\"FIELD\":{\"BUSINESS_OBJECT\":\"Account\",\"COLUMN_ID\":\"ACCOUNT_ID\",\"PATH\":\"ITEM.ACCOUNT\"},\"VALUE\":\"A\"},{\"OPERATOR\":\"IsNot\",\"FIELD\":{\"BUSINESS_OBJECT\":\"Activity_Type\",\"COLUMN_ID\":\"ACTIVITY_TYPE_ID\",\"PATH\":\"ITEM.ACTIVITY_TYPE\"},\"VALUE\":\"{\\\"ACTIVITY_TYPE_ID\\\":\\\"#AT2\\\",\\\"CONTROLLING_AREA_ID\\\":\\\"#CA1\\\",\\\"ACCOUNT_ID\\\":null,\\\"_VALID_FROM\\\":null,\\\"_VALID_TO\\\":null,\\\"_SOURCE\\\":null,\\\"_VALID_FROM_FIRST_VERSION\\\":null,\\\"_CREATED_BY\\\":null,\\\"_CREATED_BY_FIRST_VERSION\\\":null}\"}]},\"CHANGE_CONFIGURATION\":{\"FIELD\":{\"BUSINESS_OBJECT\":\"Business_Area\",\"COLUMN_ID\":\"BUSINESS_AREA_ID\",\"PATH\":\"ITEM.BUSINESS_AREA\"},\"OPERATOR\":\"SetFixed\",\"REPLACE_TEXT_VALUE\":\"\",\"REPLACE_WITH_VALUE\":\"\",\"VALUE\":\"{\\\"BUSINESS_AREA_ID\\\":\\\"#BA1\\\",\\\"_VALID_FROM\\\":null,\\\"_VALID_TO\\\":null,\\\"_SOURCE\\\":null,\\\"_VALID_FROM_FIRST_VERSION\\\":null,\\\"_CREATED_BY\\\":null,\\\"_CREATED_BY_FIRST_VERSION\\\":null}\"}}",
            "{\"FILTER_CONFIGURATION\":{\"CONDITIONS\":[{\"OPERATOR\":\"Is\",\"FIELD\":{\"BUSINESS_OBJECT\":\"Item\",\"COLUMN_ID\":\"IS_ACTIVE\",\"PATH\":\"ITEM\"},\"VALUE\":\"True\"}]},\"CHANGE_CONFIGURATION\":{\"FIELD\":{\"BUSINESS_OBJECT\":\"Design_Office\",\"COLUMN_ID\":\"DESIGN_OFFICE_ID\",\"PATH\":\"ITEM.DESIGN_OFFICE\"},\"OPERATOR\":\"ReplaceSubstring\",\"REPLACE_TEXT_VALUE\":\"tes\",\"REPLACE_WITH_VALUE\":\"wes\",\"VALUE\":null}}",
            "{\"FILTER_CONFIGURATION\":{\"CONDITIONS\":[{\"OPERATOR\":\"IsNot\",\"FIELD\":{\"BUSINESS_OBJECT\":\"Material\",\"COLUMN_ID\":\"MATERIAL_ID\",\"PATH\":\"ITEM.MATERIAL\"},\"VALUE\":\"{\\\"MATERIAL_ID\\\":\\\"#100-120\\\",\\\"BASE_UOM_ID\\\":null,\\\"MATERIAL_GROUP_ID\\\":null,\\\"MATERIAL_TYPE_ID\\\":null,\\\"IS_CREATED_VIA_CAD_INTEGRATION\\\":null,\\\"IS_PHANTOM_MATERIAL\\\":null,\\\"IS_CONFIGURABLE_MATERIAL\\\":null,\\\"_VALID_FROM\\\":null,\\\"_VALID_TO\\\":null,\\\"_SOURCE\\\":null,\\\"_VALID_FROM_FIRST_VERSION\\\":null,\\\"_CREATED_BY\\\":null,\\\"_CREATED_BY_FIRST_VERSION\\\":null}\"}]},\"CHANGE_CONFIGURATION\":{\"FIELD\":{\"BUSINESS_OBJECT\":\"Design_Office\",\"COLUMN_ID\":\"DESIGN_OFFICE_ID\",\"PATH\":\"ITEM.DESIGN_OFFICE\"},\"OPERATOR\":\"SetFixed\",\"REPLACE_TEXT_VALUE\":\"\",\"REPLACE_WITH_VALUE\":\"\",\"VALUE\":\"{\\\"_VALID_FROM\\\":null,\\\"_VALID_TO\\\":null,\\\"_SOURCE\\\":null,\\\"_VALID_FROM_FIRST_VERSION\\\":null,\\\"DESIGN_OFFICE_ID\\\":\\\"#L1\\\",\\\"_CREATED_BY\\\":null,\\\"_CREATED_BY_FIRST_VERSION\\\":null}\"}}",
            "{\"FILTER_CONFIGURATION\":{\"CONDITIONS\":[]},\"CHANGE_CONFIGURATION\":{\"FIELD\":{\"BUSINESS_OBJECT\":\"Design_Office\",\"COLUMN_ID\":\"DESIGN_OFFICE_ID\",\"PATH\":\"ITEM.DESIGN_OFFICE\"},\"OPERATOR\":\"SetFixed\",\"REPLACE_TEXT_VALUE\":\"\",\"REPLACE_WITH_VALUE\":\"\",\"VALUE\":\"{\\\"_VALID_FROM\\\":null,\\\"_VALID_TO\\\":null,\\\"_SOURCE\\\":null,\\\"_VALID_FROM_FIRST_VERSION\\\":null,\\\"DESIGN_OFFICE_ID\\\":\\\"#L1\\\",\\\"_CREATED_BY\\\":null,\\\"_CREATED_BY_FIRST_VERSION\\\":null}\"}}",
            "{\"CONDITIONS\":[{\"OPERATOR\":\"Is\",\"FIELD\":{\"BUSINESS_OBJECT\":\"Material\",\"COLUMN_ID\":\"MATERIAL_ID\",\"PATH\":\"ITEM.MATERIAL\"},\"VALUE\":\"{\\\"MATERIAL_ID\\\":\\\"#100-100\\\",\\\"BASE_UOM_ID\\\":null,\\\"MATERIAL_GROUP_ID\\\":null,\\\"MATERIAL_TYPE_ID\\\":null,\\\"IS_CREATED_VIA_CAD_INTEGRATION\\\":null,\\\"IS_PHANTOM_MATERIAL\\\":null,\\\"IS_CONFIGURABLE_MATERIAL\\\":null,\\\"_VALID_FROM\\\":null,\\\"_VALID_TO\\\":null,\\\"_SOURCE\\\":null,\\\"_VALID_FROM_FIRST_VERSION\\\":null,\\\"_CREATED_BY\\\":null,\\\"_CREATED_BY_FIRST_VERSION\\\":null}\"}]}",
            "{\"CONDITIONS\":[{\"OPERATOR\":\"GreaterThan\",\"FIELD\":{\"BUSINESS_OBJECT\":\"Item\",\"COLUMN_ID\":\"PRICE\",\"PATH\":\"ITEM\"},\"VALUE\":\"11\"}]}",
            "{\"CONDITIONS\":[{\"OPERATOR\":\"Is\",\"FIELD\":{\"BUSINESS_OBJECT\":\"Account\",\"COLUMN_ID\":\"ACCOUNT_ID\",\"PATH\":\"ITEM.ACCOUNT\"},\"VALUE\":\"{\\\"ACCOUNT_ID\\\":\\\"#AC02\\\",\\\"CONTROLLING_AREA_ID\\\":\\\"#CA3\\\",\\\"_VALID_FROM\\\":null,\\\"_VALID_TO\\\":null,\\\"_SOURCE\\\":null,\\\"_VALID_FROM_FIRST_VERSION\\\":null,\\\"_CREATED_BY\\\":null,\\\"_CREATED_BY_FIRST_VERSION\\\":null}\"}]}",
            "{\"CONDITIONS\":[{\"OPERATOR\":\"Is\",\"FIELD\":{\"BUSINESS_OBJECT\":\"Work_Center\",\"COLUMN_ID\":\"WORK_CENTER_ID\",\"PATH\":\"ITEM.WORK_CENTER\"},\"VALUE\":\"{\\\"WORK_CENTER_ID\\\":\\\"#WCEN111\\\",\\\"WORK_CENTER_CATEGORY\\\":null,\\\"PLANT_ID\\\":\\\"#PT1\\\",\\\"COST_CENTER_ID\\\":null,\\\"CONTROLLING_AREA_ID\\\":null,\\\"WORK_CENTER_RESPONSIBLE\\\":null,\\\"EFFICIENCY\\\":null,\\\"_VALID_FROM\\\":null,\\\"_VALID_TO\\\":null,\\\"_SOURCE\\\":null,\\\"_VALID_FROM_FIRST_VERSION\\\":null,\\\"_CREATED_BY\\\":null,\\\"_CREATED_BY_FIRST_VERSION\\\":null}\"},{\"OPERATOR\":\"Is\",\"FIELD\":{\"BUSINESS_OBJECT\":\"Item\",\"COLUMN_ID\":\"WORK_CENTER_CATEGORY\",\"PATH\":\"ITEM\"},\"VALUE\":\"Machine\"}]}",
            "{\"CONDITIONS\":[{\"OPERATOR\":\"Is\",\"FIELD\":{\"BUSINESS_OBJECT\":\"Item\",\"COLUMN_ID\":\"CUST_DECIMAL_FORMULA\",\"PATH\":\"ITEM\"},\"VALUE\":\"10\"}]}",
            "{\"CONDITIONS\":[{\"OPERATOR\":\"Is\",\"FIELD\":{\"BUSINESS_OBJECT\":\"Design_Office\",\"COLUMN_ID\":\"DESIGN_OFFICE_ID\",\"PATH\":\"ITEM.DESIGN_OFFICE\"},\"VALUE\":\"{\\\"_VALID_FROM\\\":null,\\\"_VALID_TO\\\":null,\\\"_SOURCE\\\":null,\\\"_VALID_FROM_FIRST_VERSION\\\":null,\\\"DESIGN_OFFICE_ID\\\":\\\"#L1\\\",\\\"_CREATED_BY\\\":null,\\\"_CREATED_BY_FIRST_VERSION\\\":null}\"}]}",
            "{\"CONDITIONS\":[{\"OPERATOR\":\"IsNot\",\"FIELD\":{\"BUSINESS_OBJECT\":\"Material\",\"COLUMN_ID\":\"MATERIAL_ID\",\"PATH\":\"ITEM.MATERIAL\"},\"VALUE\":\"{\\\"MATERIAL_ID\\\":\\\"#100-100\\\",\\\"BASE_UOM_ID\\\":null,\\\"MATERIAL_GROUP_ID\\\":null,\\\"MATERIAL_TYPE_ID\\\":null,\\\"IS_CREATED_VIA_CAD_INTEGRATION\\\":null,\\\"IS_PHANTOM_MATERIAL\\\":null,\\\"IS_CONFIGURABLE_MATERIAL\\\":null,\\\"_VALID_FROM\\\":null,\\\"_VALID_TO\\\":null,\\\"_SOURCE\\\":null,\\\"_VALID_FROM_FIRST_VERSION\\\":null,\\\"_CREATED_BY\\\":null,\\\"_CREATED_BY_FIRST_VERSION\\\":null}\"},{\"OPERATOR\":\"IsNot\",\"FIELD\":{\"BUSINESS_OBJECT\":\"Material\",\"COLUMN_ID\":\"MATERIAL_DESCRIPTION\",\"PATH\":\"ITEM.MATERIAL\"},\"VALUE\":\" abc\"},{\"OPERATOR\":\"IsNot\",\"FIELD\":{\"BUSINESS_OBJECT\":\"Material\",\"COLUMN_ID\":\"_SOURCE\",\"PATH\":\"ITEM.MATERIAL\"},\"VALUE\":\"ERP\"},{\"OPERATOR\":\"IsNot\",\"FIELD\":{\"BUSINESS_OBJECT\":\"Material_Type\",\"COLUMN_ID\":\"MATERIAL_TYPE_ID\",\"PATH\":\"ITEM.MATERIAL_TYPE\"},\"VALUE\":\"{\\\"MATERIAL_TYPE_ID\\\":\\\"#FIN\\\",\\\"_VALID_FROM\\\":null,\\\"_VALID_TO\\\":null,\\\"_SOURCE\\\":null,\\\"_VALID_FROM_FIRST_VERSION\\\":null,\\\"_CREATED_BY\\\":null,\\\"_CREATED_BY_FIRST_VERSION\\\":null}\"}]}",
            "{\"CONDITIONS\":[{\"OPERATOR\":\"Is\",\"FIELD\":{\"BUSINESS_OBJECT\":\"Item\",\"COLUMN_ID\":\"IS_RELEVANT_TO_COSTING_IN_ERP\",\"PATH\":\"ITEM\"},\"VALUE\":\"True\"}]}",
            "{\"CONDITIONS\":[{\"OPERATOR\":\"Is\",\"FIELD\":{\"BUSINESS_OBJECT\":\"Document\",\"COLUMN_ID\":\"DOCUMENT_ID\",\"PATH\":\"ITEM.DOCUMENT\"},\"VALUE\":\"{\\\"DOCUMENT_TYPE_ID\\\":\\\"#DR\\\",\\\"DOCUMENT_ID\\\":\\\"#DOC-100-100\\\",\\\"DOCUMENT_VERSION\\\":\\\"#1\\\",\\\"DOCUMENT_PART\\\":\\\"#01\\\",\\\"IS_CREATED_VIA_CAD_INTEGRATION\\\":null,\\\"DOCUMENT_STATUS_ID\\\":null,\\\"_VALID_FROM\\\":null,\\\"_VALID_TO\\\":null,\\\"_SOURCE\\\":null,\\\"_VALID_FROM_FIRST_VERSION\\\":null,\\\"DESIGN_OFFICE_ID\\\":null,\\\"_CREATED_BY\\\":null,\\\"_CREATED_BY_FIRST_VERSION\\\":null}\"}]}",
            "{\"CONDITIONS\":[{\"OPERATOR\":\"IsNot\",\"FIELD\":{\"BUSINESS_OBJECT\":\"Document\",\"COLUMN_ID\":\"DOCUMENT_ID\",\"PATH\":\"ITEM.DOCUMENT\"},\"VALUE\":\"{\\\"DOCUMENT_TYPE_ID\\\":\\\"#DR\\\",\\\"DOCUMENT_ID\\\":\\\"#DOC-100-100\\\",\\\"DOCUMENT_VERSION\\\":\\\"#1\\\",\\\"DOCUMENT_PART\\\":\\\"#01\\\",\\\"IS_CREATED_VIA_CAD_INTEGRATION\\\":null,\\\"DOCUMENT_STATUS_ID\\\":null,\\\"_VALID_FROM\\\":null,\\\"_VALID_TO\\\":null,\\\"_SOURCE\\\":null,\\\"_VALID_FROM_FIRST_VERSION\\\":null,\\\"DESIGN_OFFICE_ID\\\":null,\\\"_CREATED_BY\\\":null,\\\"_CREATED_BY_FIRST_VERSION\\\":null}\"}]}",     
            "{\"CONDITIONS\":[{\"OPERATOR\":\"Contains\",\"FIELD\":{\"BUSINESS_OBJECT\":\"Process\",\"COLUMN_ID\":\"PROCESS_ID\",\"PATH\":\"ITEM.PROCESS\"},\"VALUE\":\"P\"}]}",
        ];

        const oFrontendSettingsTestData = {
            SETTING_ID: [100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116],
            SETTING_NAME: ["TotalCostCurrencyMassChange", "ClearPlantMaterialTypeMassChange", "FilterAccountSetBusinessAreaMassChange", "ChangeActiveItemsDescriptionMassChange", "DesignOfficeFilterMassChange", "DesignOfficeMassChange", "MaterialFilter", "PriceFilter", "AccountFilter", "WorkCenterFilter", "CustDecimalFilter", "DesignOfficeFilter", "AllMaterialsFilter", "CostRelevantInERPFilter", "DocumentFilter", "DocumentIsNotFilter", "ProcessFilter"],
            SETTING_TYPE: ["MASSCHANGE", "MASSCHANGE", "MASSCHANGE", "MASSCHANGE", "MASSCHANGE", "MASSCHANGE", "FILTER", "FILTER", "FILTER", "FILTER", "FILTER", "FILTER", "FILTER", "FILTER", "FILTER", "FILTER", "FILTER"],
            USER_ID: [null, null, null, null, null, null, null, null, null, null, null, "TestUser", null, null, "User", null, null],
            SETTING_CONTENT: [sTotalCostCurrencyMassChange, sClearPlantMaterialTypeMassChange, sFilterAccountSetBusinessAreaMassChange, sChangeActiveItemsDescriptionMassChange, sDesignOfficeFilterMassChange, sDesignOfficeMassChange, sMaterialFilter, sPriceFilter, sAccountFilter, sWorkCenterFilter, sCustDecimalFilter, sDesignOfficeFilter, sAllMaterialsFilter, sCostRelevantInERPFilter, sDocumentFilter, sDocumentIsNotFilter, sProcessFilter],
        };
        oMockstar.insertTableData("frontend_settings", oFrontendSettingsTestData);
        jasmine.dbConnection.commit();

        // act
        frontendSettingsAdaption.run(jasmine.dbConnection);

        // assert
        const oFrontendSettingsAfter = oMockstar.execQuery(`select SETTING_ID, SETTING_CONTENT from {{frontend_settings}}
                                                                    where SETTING_ID in (${oFrontendSettingsTestData.SETTING_ID}) order by SETTING_ID`);
        oFrontendSettingsAfter.columns.SETTING_CONTENT.rows.forEach((sFrontendSetting, iIndex) => {
            expect(helpers.arrayBufferToString($.util.codec.decodeBase64(sFrontendSetting))).toBe(aExpectedFrontendSettings[iIndex]);
        });
    });
    it("should adapt the columns that were affected by data model change even if FILTER_CONFIGURATION property is not set", () => {
        // arrange
        // data before
        const sTotalCostCurrencyMassChange = "eyJDSEFOR0VfQ09ORklHVVJBVElPTiI6eyJGSUVMRCI6eyJCVVNJTkVTU19PQkpFQ1QiOiJJdGVtIiwiQ09MVU1OX0lEIjoiVEFSR0VUX0NPU1RfQ1VSUkVOQ1lfSUQiLCJQQVRIIjoiSVRFTSJ9LCJPUEVSQVRPUiI6IlNldEZpeGVkIiwiUkVQTEFDRV9URVhUX1ZBTFVFIjoiIiwiUkVQTEFDRV9XSVRIX1ZBTFVFIjoiIiwiVkFMVUUiOiJ7XCJDVVJSRU5DWV9JRFwiOlwiQlJMXCIsXCJERUNJTUFMU19ESVNQTEFZRURcIjowLFwiX1ZBTElEX0ZST01cIjpudWxsLFwiX1ZBTElEX1RPXCI6bnVsbCxcIl9TT1VSQ0VcIjpudWxsLFwiX0NSRUFURURfQllfVVNFUl9JRFwiOm51bGwsXCJfVkFMSURfRlJPTV9GSVJTVF9WRVJTSU9OXCI6bnVsbCxcIl9DUkVBVEVEX0JZX1VTRVJfSURfRklSU1RfVkVSU0lPTlwiOm51bGx9In19";
        const sClearPlantMaterialTypeMassChange = "eyJGSUxURVJfQ09ORklHVVJBVElPTiI6eyJDT05ESVRJT05TIjpbeyJPUEVSQVRPUiI6IklzIiwiRklFTEQiOnsiQlVTSU5FU1NfT0JKRUNUIjoiTWF0ZXJpYWxfVHlwZSIsIkNPTFVNTl9JRCI6Ik1BVEVSSUFMX1RZUEVfSUQiLCJQQVRIIjoiSVRFTS5NQVRFUklBTF9UWVBFIn0sIlZBTFVFIjoie1wiTUFURVJJQUxfVFlQRV9JRFwiOlwiI0ZJTlwiLFwiX1ZBTElEX0ZST01cIjpudWxsLFwiX1ZBTElEX1RPXCI6bnVsbCxcIl9TT1VSQ0VcIjpudWxsLFwiX0NSRUFURURfQllfVVNFUl9JRFwiOm51bGwsXCJfVkFMSURfRlJPTV9GSVJTVF9WRVJTSU9OXCI6bnVsbCxcIl9DUkVBVEVEX0JZX1VTRVJfSURfRklSU1RfVkVSU0lPTlwiOm51bGx9In1dfSwiQ0hBTkdFX0NPTkZJR1VSQVRJT04iOnsiRklFTEQiOnsiQlVTSU5FU1NfT0JKRUNUIjoiUGxhbnQiLCJDT0xVTU5fSUQiOiJQTEFOVF9JRCIsIlBBVEgiOiJJVEVNLlBMQU5UIn0sIk9QRVJBVE9SIjoiU2V0RW1wdHkiLCJSRVBMQUNFX1RFWFRfVkFMVUUiOiIiLCJSRVBMQUNFX1dJVEhfVkFMVUUiOiIiLCJWQUxVRSI6bnVsbH19";
    
        const sMaterialFilter = "e30=";
        const sPriceFilter = "eyJDT05ESVRJT05TIjpbeyJPUEVSQVRPUiI6IkdyZWF0ZXJUaGFuIiwiRklFTEQiOnsiQlVTSU5FU1NfT0JKRUNUIjoiSXRlbSIsIkNPTFVNTl9JRCI6IlBSSUNFIiwiUEFUSCI6IklURU0ifSwiVkFMVUUiOiIxMSJ9XX0=";
        // data after
        const aExpectedFrontendSettings = [
            "{\"CHANGE_CONFIGURATION\":{\"FIELD\":{\"BUSINESS_OBJECT\":\"Item\",\"COLUMN_ID\":\"TARGET_COST_CURRENCY_ID\",\"PATH\":\"ITEM\"},\"OPERATOR\":\"SetFixed\",\"REPLACE_TEXT_VALUE\":\"\",\"REPLACE_WITH_VALUE\":\"\",\"VALUE\":\"{\\\"CURRENCY_ID\\\":\\\"BRL\\\",\\\"_VALID_FROM\\\":null,\\\"_VALID_TO\\\":null,\\\"_SOURCE\\\":null,\\\"_VALID_FROM_FIRST_VERSION\\\":null,\\\"_CREATED_BY\\\":null,\\\"_CREATED_BY_FIRST_VERSION\\\":null}\"}}",
            "{\"FILTER_CONFIGURATION\":{\"CONDITIONS\":[{\"OPERATOR\":\"Is\",\"FIELD\":{\"BUSINESS_OBJECT\":\"Material_Type\",\"COLUMN_ID\":\"MATERIAL_TYPE_ID\",\"PATH\":\"ITEM.MATERIAL_TYPE\"},\"VALUE\":\"{\\\"MATERIAL_TYPE_ID\\\":\\\"#FIN\\\",\\\"_VALID_FROM\\\":null,\\\"_VALID_TO\\\":null,\\\"_SOURCE\\\":null,\\\"_VALID_FROM_FIRST_VERSION\\\":null,\\\"_CREATED_BY\\\":null,\\\"_CREATED_BY_FIRST_VERSION\\\":null}\"}]},\"CHANGE_CONFIGURATION\":{\"FIELD\":{\"BUSINESS_OBJECT\":\"Plant\",\"COLUMN_ID\":\"PLANT_ID\",\"PATH\":\"ITEM.PLANT\"},\"OPERATOR\":\"SetEmpty\",\"REPLACE_TEXT_VALUE\":\"\",\"REPLACE_WITH_VALUE\":\"\",\"VALUE\":null}}",
            "{}",
            "{\"CONDITIONS\":[{\"OPERATOR\":\"GreaterThan\",\"FIELD\":{\"BUSINESS_OBJECT\":\"Item\",\"COLUMN_ID\":\"PRICE\",\"PATH\":\"ITEM\"},\"VALUE\":\"11\"}]}",
        ];

        const oFrontendSettingsTestData = {
            SETTING_ID: [100, 101, 106, 107],
            SETTING_NAME: ["TotalCostCurrencyMassChange", "ClearPlantMaterialTypeMassChange","MaterialFilter", "PriceFilter"],
            SETTING_TYPE: ["MASSCHANGE", "MASSCHANGE", "FILTER", "FILTER"],
            USER_ID: [null, null, null, null],
            SETTING_CONTENT: [sTotalCostCurrencyMassChange, sClearPlantMaterialTypeMassChange,sMaterialFilter, sPriceFilter],
        };
        oMockstar.insertTableData("frontend_settings", oFrontendSettingsTestData);
        jasmine.dbConnection.commit();

        // act
        frontendSettingsAdaption.run(jasmine.dbConnection);

        // assert
        const oFrontendSettingsAfter = oMockstar.execQuery(`select SETTING_ID, SETTING_CONTENT from {{frontend_settings}}
                                                                    where SETTING_ID in (${oFrontendSettingsTestData.SETTING_ID}) order by SETTING_ID`);
        oFrontendSettingsAfter.columns.SETTING_CONTENT.rows.forEach((sFrontendSetting, iIndex) => {
            expect(helpers.arrayBufferToString($.util.codec.decodeBase64(sFrontendSetting))).toBe(aExpectedFrontendSettings[iIndex]);
        });
    });

}).addTags(["All_Unit_Tests"]);
